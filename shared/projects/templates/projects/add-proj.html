<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0rem;
            padding: 0rem;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            font-family: Helvetica, Arial, sans-serif;
            background-color: #f5f5f5;
        }
        main {
            display: flex;
            flex-direction: column;
            justify-content: flex-start; 
            align-items: stretch;
            margin: 0 5rem 2rem 5rem;
            gap: 0.5rem;  
            padding: 1rem 3rem;
        }
        footer {
            background-color: #245F3E;
            position: relative;
            bottom: 0;
            width: 100%;
            height: 20rem;
        }    
        header {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 1.25rem; 
            margin: 0;
            padding: 0.5rem 1rem;
            border: 1px solid #e0e0e0;
            background-color: #f5f5f5;
            position: relative;
            top: 0;
        } 
        header img {
            border-radius: 50%; 
            border: 4px solid #e4c600;
            margin-right: 0.75rem;
            width: 3.25rem;
            height: 3.25rem;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.2s ease;
        }   
        i {
            font-size: 1.75rem;
            color: black; 
            margin-right: 0.75rem;
            font-weight: 400;  
            text-decoration: none;
        }
        a {
            text-decoration: none;   
        } 
        h2 {
            font-size: 1.75rem;
            font-weight: 400;
            margin: 1.5rem 1rem 0rem 1rem;
        }
        h4 {
            font-size: 1.15rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        .all { 
            padding: 1rem;
        }
        .all > section {
            padding: 1.5rem 1.75rem;
            background-color: white;
            border-radius: 1rem;
            margin-bottom: 2rem; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        } 
        .all label {
            color: #9a9a9a;
        }
        .all input, option, select { 
            margin-bottom: 1rem;
            border: 1px solid #050505 !important;
            background-color: whitesmoke !important;
        }
        .label { 
            font-size: 1rem; 
            color: gray; 
            margin-bottom: 0.25rem; 
            display: block; 
        } 
        .chip-container { 
            display: flex; 
            flex-wrap: wrap; 
            align-items: center;
            gap: 0.5rem; 
            margin-bottom: 0.75rem; 
            height: 4rem;
        }
        .chip {
            display: flex; 
            align-items: center; 
            border: 1px solid #aaa; 
            border-radius: 0.5rem; 
            padding: 0.5rem 1rem; 
            gap: 1.25rem; 
            background: white;
        }
        .chip img { 
            width: 2.5rem; 
            height: 2.5rem; 
            border-radius: 50%; 
        }
        .chip button { 
            border: none; 
            background: transparent; 
            color: darkred; 
            cursor: pointer; 
            font-size: 1.5rem; 
        }
        .add-btn { 
            width: 2.5rem; 
            height: 2.5rem; 
            border-radius: 50%; 
            border: 1px solid #aaa; 
            background: #f9f9f9; 
            cursor: pointer; 
            font-size: 1.5rem;
        }
        .overlay {
            position: fixed;  
            top: 0;  
            left: 0; 
            right: 0; 
            bottom: 0;
            background: rgba(0,0,0,0.4); 
            display: none; 
            justify-content: center; 
            align-items: center;
        }
        .overlay-content {
            background: white;  
            padding: 2rem; 
            border-radius: 1rem; 
            width: 40rem;
        }
        .account {
            display: flex; 
            align-items: center; 
            gap: 1rem; 
            padding: 1rem; 
            cursor: pointer;
        }
        .account:hover { 
            background: #f0f0f0; 
        }
        .account img { 
            width: 1.5rem; 
            height: 1.5rem; 
            border-radius: 50%; 
        } 
        .logistics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logistics-select {
            width: 8rem;          
            padding: 0.25rem 1.25rem 0.25rem 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid #ccc;
            background: #f9f9f9;
            font-size: 0.9rem;
            cursor: pointer; 
            text-align: center;
        }
        .logistics-header h4 {
            margin: 0;
            font-weight: 700;
        }
        .form-group label {
            color: #777;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
            display: block;
        }
        .form-control {
            border: 1px solid #ccc;
            background: #f9f9f9;
        } 
        .logistics-content {
            display: grid;
            grid-template-columns: 1fr;
        }
        .logistics-content .form-group {
            width: 100%;
        }  
        .upload-box {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            border: 0.1rem dashed #aaa;
            border-radius: 0.375rem;
            background-color: #f9f9f9;
            cursor: pointer;
            padding: 0.5rem 1rem;
            font-size: 1rem;
            color: #555;
            transition: background-color 0.2s;
            min-width: 12rem;
            height: 2.5rem; 
        }
        .upload-box:hover {
            background-color: #f1f1f1;
        }
        .upload-box i {
            font-size: 1rem; 
        }
        .file-upload-row {
            display: flex;
            align-items: center;
            gap: 0.5rem; 
            flex-wrap: wrap; 
        }
        .file-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 0;
        }
        .file-item {
            display: inline-flex;
            align-items: center;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 0.375rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.9rem;
        }
        .file-item i {
            font-size: 1rem;
            color: darkred;
            margin-right: 0.25rem;
            cursor: pointer;
        } 
        .submit-button { 
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        .submit-button button { 
            background-color: #063A1C;  
            border-radius: 1rem;
            color: whitesmoke;
            padding: 0.75rem 3rem;
        }
    </style>
</head>
<body> 
    <header>
        <a href="#" title="Notifications">
            <i class="fa-regular fa-bell"></i>
        </a>
        <a href="#" title="Settings">
            <i class="ri-settings-3-line" style="font-size: 2rem;"></i>
        </a>
        <a href="#">
            <img src="https://cdn.pixabay.com/photo/2023/02/18/11/00/icon-7797704_640.png"
                alt="profilepic">
        </a>    
    </header>
    <main> 
        <h2>Add Project</h2> 
        <form class="all">  
            <section> 
                <h4>Project Profile</h4>
                    <div class="form-group">
                        <label>Title</label>
                        <input class="form-control" placeholder="Enter title">
                    </div>
                    <div class="form-group">
                        <label>Provider/s</label>
                        <div class="chip-container" id="providers">
                            <button type="button" class="add-btn" id="openProviderOverlay">+</button>
                        </div>
                        </div>

                        <div class="overlay" id="providerOverlay">
                        <div class="overlay-content">
                            <h3>Select Provider</h3>
                            <div id="providerAccountsList"></div>
                            <div style="text-align:center; margin-top:1.5rem;">
                            <button type="button" class="btn btn-secondary" onclick="closeOverlay('providerOverlay')">Close</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Agenda</label>
                        <select class="form-control">
                            <option value="">Select an agenda ▾</option>
                            <option value="meeting">Meeting</option>
                            <option value="training">Training</option>
                            <option value="planning">Planning</option>
                            <option value="evaluation">Evaluation</option>
                        </select>
                    </div> 
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                            <label>Campus</label>
                            <select class="form-control">
                                <option value="">Select a campus ▾</option>
                                <option value="main">Main</option>
                                <option value="satellite">Satellite</option>
                            </select>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                            <label>Project Type</label>
                            <select class="form-control">
                                <option value="">Select project type ▾</option>
                                <option value="research">Research</option>
                                <option value="extension">Needs</option>
                            </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Sustainable Development Goal</label>
                        <div class="chip-container" id="sdgProviders">
                            <button type="button" class="add-btn" id="openSdgOverlay">+</button>
                        </div>
                        </div>

                        <div class="overlay" id="sdgOverlay">
                        <div class="overlay-content">
                            <h3>Select SDG</h3>
                            <div id="sdgAccountsList"></div>
                            <div style="text-align:center; margin-top:1.5rem;">
                            <button type="button" class="btn btn-secondary" onclick="closeOverlay('sdgOverlay')">Close</button>
                            </div>
                        </div>
                    </div>
            </section>
            <section> 
                <h4>Beneficiary</h4>
                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                        <label>Client</label>
                        <input class="form-control" placeholder="Enter client">
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                        <label>No. of Estimated Events</label>
                        <input class="form-control" placeholder="Enter number">
                    </div>
                </div> 
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                        <label>No. of Estimated Trainees</label>
                        <input class="form-control" placeholder="Enter number">
                        </div>
                    </div>

                    <div class="col-md-8">
                        <div class="form-group">
                        <label>Primary Location</label>
                        <input class="form-control" placeholder="Enter location">
                    </div>
                </div>
            </section>
            <section class="logistics-box">
                <div class="logistics-header">
                    <h4>Logistics</h4>
                    <select id="logisticsType" class="logistics-select">
                        <option value="internal" selected>Internal</option>
                        <option value="external">External</option>
                        <option value="both">Both</option>
                    </select>
                </div>

                <!-- Internal fields --> 
                <div class="logistics-content" id="internalFields">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Budget Assigned</label>
                                <input class="form-control" placeholder="Enter number">
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Start Date</label>
                                <input class="form-control" placeholder="Enter date">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Estimated End Date</label>
                                <input class="form-control" placeholder="Enter date">
                            </div>
                        </div>  
                    </div> 
                    <div class="row">
                        <div class="col-md-4">
                            <label>Proposal</label>
                            <div class="file-upload-row">
                                <div id="proposalUploadInternal" class="upload-box"><i class="fa fa-upload"></i> Click to upload</div>
                                    <input type="file" id="proposalInputInternal" hidden>
                                <div id="proposalFileInternal" class="file-list"></div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <label>Additional Documents</label>
                                <div class="file-upload-row">
                                    <div id="additionalUploadInternal" class="upload-box"><i class="fa fa-upload"></i> Click to upload</div>
                                <input type="file" id="additionalInputInternal" hidden multiple>
                                <div id="additionalFilesInternal" class="file-list"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- External fields -->
                <div class="logistics-content" id="externalFields" style="display:none;">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Budget Assigned</label>
                                <input class="form-control" placeholder="Enter number">
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Start Date</label>
                                <input class="form-control" placeholder="Enter date">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Estimated End Date</label>
                                <input class="form-control" placeholder="Enter date">
                            </div>
                        </div>  
                    </div> 
                    <div class="form-group">
                        <label>Name of Sponsor</label>
                        <input type="text" class="form-control" placeholder="External Sponsor">
                    </div> 
                    <div class="row">
                        <div class="col-md-4">
                            <label>Proposal</label>
                            <div class="file-upload-row">
                                <div id="proposalUploadExternal" class="upload-box"><i class="fa fa-upload"></i> Click to upload</div>
                                    <input type="file" id="proposalInputExternal" hidden>
                                <div id="proposalFileExternal" class="file-list"></div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <label>Additional Documents</label>
                            <div class="file-upload-row">
                                <div id="additionalUploadExternal" class="upload-box"><i class="fa fa-upload"></i> Click to upload</div>
                                    <input type="file" id="additionalInputExternal" hidden multiple>
                                <div id="additionalFilesExternal" class="file-list"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Both fields -->
                <div class="logistics-content" id="bothFields" style="display:none;">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Internal Budget Assigned</label>
                                <input class="form-control" placeholder="Enter number">
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label>External Budget Assigned</label>
                                <input class="form-control" placeholder="Enter number">
                            </div>
                        </div>
                    </div> 

                    <div class="form-group">
                        <label>Name of Beneficiary</label>
                        <input class="form-control" placeholder="Enter name">
                    </div>  

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Start Date</label>
                                <input class="form-control" placeholder="Enter date">
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <label>Estimated End Date</label>
                                <input class="form-control" placeholder="Enter date">
                            </div>
                        </div>
                    </div>  
                     
                    <div class="row">
                        <div class="col-md-4">
                            <label>Proposal</label>
                            <div class="file-upload-row">
                                <div id="proposalUploadBoth" class="upload-box"><i class="fa fa-upload"></i> Click to upload</div>
                                    <input type="file" id="proposalInputBoth" hidden>
                                <div id="proposalFileBoth" class="file-list"></div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <label>Additional Documents</label>
                            <div class="file-upload-row">
                                <div id="additionalUploadBoth" class="upload-box"><i class="fa fa-upload"></i> Click to upload</div>
                                    <input type="file" id="additionalInputBoth" hidden multiple>
                                <div id="additionalFilesBoth" class="file-list"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section> 
            <div class="submit-button">
                <button type="submit">Submit</button>
            </div>
        </form>
    </main>
    <footer>
        <p>test</p>
    </footer>
    <script>
        // exs data
        const accounts = [
        { id: 1, name: "Provider A", img: "https://via.placeholder.com/50" },
        { id: 2, name: "Provider B", img: "https://via.placeholder.com/50" },
        { id: 3, name: "Provider C", img: "https://via.placeholder.com/50" }
        ];

        const sdgs = [
        { id: 1, name: "No Poverty", img: "https://via.placeholder.com/50" },
        { id: 2, name: "Zero Hunger", img: "https://via.placeholder.com/50" },
        { id: 3, name: "Quality Education", img: "https://via.placeholder.com/50" }
        ];

        function openOverlay(overlayId, listId, containerId, type) {
        const overlay = document.getElementById(overlayId);
        overlay.style.display = "flex";
        renderAccounts(listId, containerId, type);
        }

        function closeOverlay(overlayId) {
        document.getElementById(overlayId).style.display = "none";
        }

        function renderAccounts(listId, containerId, type) {
        const list = document.getElementById(listId);
        list.innerHTML = "";

        const source = type === "provider" ? accounts : sdgs;

        source.forEach(acc => {
            const div = document.createElement("div");
            div.className = "account";
            div.innerHTML = `<img src="${acc.img}"><span>${acc.name}</span>`;
            div.addEventListener("click", () => addProvider(acc, containerId, type));
            list.appendChild(div);
        });
        }

        function addProvider(acc, containerId, type) {
        const container = document.getElementById(containerId);
        if (document.getElementById("chip-" + acc.id + "-" + containerId)) return;

        const chip = document.createElement("div");
        chip.className = "chip";
        chip.id = "chip-" + acc.id + "-" + containerId;
        chip.innerHTML = `
            <button>&times;</button>
            <img src="${acc.img}">
            <span>${acc.name}</span>
        `;
        chip.querySelector("button").addEventListener("click", () => chip.remove());
        container.appendChild(chip);

        closeOverlay(type === "provider" ? "providerOverlay" : "sdgOverlay");
        }

        // Open overlay buttons
        document.getElementById("openProviderOverlay").addEventListener("click", () =>
        openOverlay("providerOverlay", "providerAccountsList", "providers", "provider")
        );

        document.getElementById("openSdgOverlay").addEventListener("click", () =>
        openOverlay("sdgOverlay", "sdgAccountsList", "sdgProviders", "sdg")
        ); 
         
        // Close overlays when clicking background
        document.querySelectorAll(".overlay").forEach(ov => {
            ov.addEventListener("click", (e) => {
                if (e.target === ov) {
                    ov.style.display = "none";
                }
            });
        });

         // logistics toggle
        function updateLogisticsView() {
        internalFields.style.display = "none";
        externalFields.style.display = "none";
        bothFields.style.display = "none";
        if (logisticsType.value === "internal") internalFields.style.display = "grid";
        if (logisticsType.value === "external") externalFields.style.display = "grid";
        if (logisticsType.value === "both") bothFields.style.display = "grid";
        }
        logisticsType.addEventListener("change", updateLogisticsView);
        updateLogisticsView();

        // Proposal upload (single file)
        function setupProposalUpload(uploadId, inputId, fileId) {
        const upload = document.getElementById(uploadId);
        const input = document.getElementById(inputId);
        const fileContainer = document.getElementById(fileId);

        upload.addEventListener('click', () => input.click());
        input.addEventListener('change', () => {
            fileContainer.innerHTML = '';
            if (input.files.length > 0) {
            upload.style.display = 'none';
            const file = input.files[0];
            const item = document.createElement('div');
            item.classList.add('file-item');
            item.innerHTML = `<i class="fa fa-times remove-file"></i><span>${file.name}</span>`;
            item.querySelector('.remove-file').addEventListener('click', () => {
                input.value = '';
                fileContainer.innerHTML = '';
                upload.style.display = 'inline-flex';
            });
            fileContainer.appendChild(item);
            }
        });
        }

        // Additional documents (multiple, prevent duplicates)
        function setupAdditionalUpload(uploadId, inputId, filesId) {
        const upload = document.getElementById(uploadId);
        const input = document.getElementById(inputId);
        const filesContainer = document.getElementById(filesId);

        upload.addEventListener('click', () => input.click());
        input.addEventListener('change', () => {
            for (const file of input.files) {
            const exists = [...filesContainer.querySelectorAll('.file-item span')]
                .some(span => span.textContent === file.name);
            if (!exists) {
                const item = document.createElement('div');
                item.classList.add('file-item');
                item.innerHTML = `<i class="fa fa-times remove-file"></i><span>${file.name}</span>`;
                item.querySelector('.remove-file').addEventListener('click', () => item.remove());
                filesContainer.appendChild(item);
            } else {
                alert(`"${file.name}" is already uploaded.`);
            }
            }
            input.value = '';
        });
        }

        // Initialize uploads for each section
        setupProposalUpload('proposalUploadInternal', 'proposalInputInternal', 'proposalFileInternal');
        setupAdditionalUpload('additionalUploadInternal', 'additionalInputInternal', 'additionalFilesInternal');

        setupProposalUpload('proposalUploadExternal', 'proposalInputExternal', 'proposalFileExternal');
        setupAdditionalUpload('additionalUploadExternal', 'additionalInputExternal', 'additionalFilesExternal');

        setupProposalUpload('proposalUploadBoth', 'proposalInputBoth', 'proposalFileBoth');
        setupAdditionalUpload('additionalUploadBoth', 'additionalInputBoth', 'additionalFilesBoth');
    </script>
</body>
</html>